function Map(width, height, image) {
	this.width = width; // Must be a multiple of 32 (Tile width)
	this.height = height; // Must be a multiple of 32 (Tile height)
	this.image = new Image();
	this.image.src = image;
	this.tileSize = 32;
	this.tilesX = this.width / this.tileSize;
	this.tilesY = this.height / this.tileSize;
	this.dynamicMap = this.testDynamicMap();

	this.tiles = new Array();
	this.tiles.push(new Image()); // Blank
	this.tiles.push(new Image()); // Blank
	this.tiles.push(new Image()); // Blank
	this.tiles.push(new Image());
	this.tiles[this.tiles.length - 1].src = 'img/wall.png';
}

Map.prototype.draw = function(context) {
	 context.drawImage(this.image, 0, 0);

	 for(var y = 0; y < this.dynamicMap.length ; y++) {
	 	for(var x = 0; x < this.dynamicMap[y].length; x++) {
	 		
	 		var tile = this.dynamicMap[y][x];
	 		if (tile > 2) {
	 			context.drawImage(this.tiles[tile], x * 32, y * 32, 32, 32);
	 		}
	 	}
	 }
}

Map.prototype.testDynamicMap = function() {
	var dynamicMap = new Array();
	dynamicMap[0]  = new Array(3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3);
	dynamicMap[1]  = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[2]  = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[3]  = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[4]  = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[5]  = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[6]  = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[7]  = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[8]  = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[9]  = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[10] = new Array(3,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3,3);
	dynamicMap[11] = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,0,0,3,0,0,3,3,3,3,0,0,0,0,0,0,3);
	dynamicMap[12] = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,3,0,3,0,0,3,3,3,0,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[13] = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[14] = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,3,0,3,0,0,3,3,3,0,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[15] = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3);
	dynamicMap[16] = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,3,3,3,0,3,3,3,0,3,0,0,0,0,0,0,0,0,0,3,3,3,3);
	dynamicMap[17] = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,3,3,3,3);
	dynamicMap[18] = new Array(3,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3);
	dynamicMap[19] = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[20] = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[21] = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[22] = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[23] = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[24] = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[25] = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[26] = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[27] = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[28] = new Array(3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3);
	dynamicMap[29] = new Array(3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3);


	return dynamicMap;
}